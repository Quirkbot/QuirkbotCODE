<link rel="import" href="../qb.html">

<polymer-element name="qb-visual-node-base">

<template>
	<style>
		:host{
			display: block;
			position: absolute;
		}
	</style>
	
</template>

<script>
	Polymer({
		observe: {
			'data.visualPosition.x data.visualPosition.y': 'positionChanged'
		},
		dragStart: function (e) {
			var dragInfo = e.detail;
			dragInfo.drag = this.drag.bind(this);
			dragInfo.drop = this.drop.bind(this);

			this.initialPosition = {
				x : this.data.visualPosition.x,
				y : this.data.visualPosition.y
			}
		},
		drag: function (dragInfo) {
			this.data.visualPosition.x = 
				this.initialPosition.x + dragInfo.event.dx;
			
			this.data.visualPosition.y = 
				this.initialPosition.y + dragInfo.event.dy;
		},
		drop: function (dragInfo) {

			
		},
		positionChanged: function () {
			var transformation = 'translate(' + this.data.visualPosition.x + 'px, '
				+ this.data.visualPosition.y + 'px)';
			//if(this.style.transform){
				this.style.transform = transformation;
			//}
			//else if(this.style.webKittransform){
				this.style.webKittransform = transformation;
			//}
			
				
		}

	});
</script>

</polymer-element>