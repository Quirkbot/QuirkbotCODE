<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<link rel="import" href="../qb-behavior-utils/qb-behavior-utils.html">
<link rel="import" href="../qb-behavior-draggable/qb-behavior-draggable.html">
<link rel="import" href="../qb-core-i18n/qb-core-i18n.html">

<dom-module id='qb-ui-nodes-menu-item'>
	<style>
		:host{
			display: block;
		}
	</style>
	<template>
		<paper-item role="menuitem">
			<iron-icon icon="{{icon}}"></iron-icon>
			<paper-item-body>
				<qb-core-i18n
					key="{{nameKey}}"
					value="{{name}}"></qb-core-i18n>
			</paper-item-body>
		</paper-item>
	</template>
</dom-module>
<script>
(function () {
	window.Quirkbot = window.Quirkbot || {};
	window.Quirkbot.UINodesMenuItem = Polymer({
		is: 'qb-ui-nodes-menu-item',
		properties: {
			data: {
				type: Object,
				observer: '_dataChanged'
			},
			nameKey: {
				type: String,
				computed: '_computeNameKey(data)'
			},
			name: {
				type: String,
				observer: '_nameChanged'
			},
			icon: {
				type: String,
				computed: '_computeIcon(data)'
			}
		},
		behaviors:[
			window.Quirkbot.DraggableBehavior,
			window.Quirkbot.UtilsBehavior
		],
		_dataChanged: function () {
			this.set('data.element', this);
		},
		_computeNameKey: function(data) {
			return 'node/name/' + data.definition._id;
		},
		_nameChanged: function (name) {
			this.set('data.name', name);
		},
		_computeIcon: function(data){
			return this.resolveIconName(data.definition._id, 'quirkbot-nodes');
		}
	});
})();
</script>
