<link rel="import" href="../../bower_components/polymer/polymer.html">
<script src="../../bower_components/page/page.js"></script>

<dom-module id="qb-core-router">
</dom-module>
<script>
(function () {
	window.Quirkbot = window.Quirkbot || {};
	window.Quirkbot.CoreRouter = Polymer({
		is: 'qb-core-router',
		properties: {
			entry: {
				type: String,
				notify: true,
				observer: '_entryChanged'
			}
		},
		ready: function(){
			this.listen(window, 'WebComponentsReady', '_addRoutes');
		},
		_entryChanged: function(entry){
			window.location.hash = '#/'+entry;
		},
		_addRoutes: function(){
			page('*', function(data){
				var entry = data.hash;
				if(entry.length && entry[0] === '/'){
					entry = entry.substr(1);
				}
				this.entry = entry;

			}.bind(this));
			page({});

		}
	});
})();
</script>
