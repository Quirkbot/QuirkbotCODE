<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">

<link rel="import" href="../qb-core-i18n/qb-core-i18n.html">
<link rel="import" href="../qb-core-router/qb-core-router.html">

<link rel="import" href="../qb-core-node-definitions/qb-core-node-definitions.html">
<link rel="import" href="../qb-core-model-controller/qb-core-model-controller.html">
<link rel="import" href="../qb-core-tree-manager/qb-core-tree-manager.html">

<link rel="import" href="../qb-ui-styles/qb-ui-styles.html">
<link rel="import" href="../qb-ui-editor/qb-ui-editor.html">

<!-- Platinum elements -->
<!--
<link rel="import" href="../bower_components/platinum-sw/platinum-sw-cache.html">
<link rel="import" href="../bower_components/platinum-sw/platinum-sw-register.html">
-->

<dom-module id='qb-ide'>
	<style>
		:host{
			display: block;
			width: 100%;
			height: 100%;
		}

	</style>
	<template>

		<qb-core-i18n
			url="/data/strings/{{locale}}.json"
			locale="{{locale}}">
		</qb-core-i18n>

		<qb-core-node-definitions
			url="/data/nodes.json"
			nodes="{{nodeDefinitions}}"
			groups="{{groupDefinitions}}"
			constants="{{constantDefinitions}}"
			taxonomies="{{taxonomyDefinitions}}">
		</qb-core-node-definitions>

		<qb-core-model-controller
			api="http://localhost:8585/api/programs"
			_id="{{programId}}"
			self="{{modelController}}"
			model="{{model}}"
			verbose="error">
		</qb-core-model-controller>

		<qb-core-tree-manager
			self="{{treeManager}}"
			model-controller="{{modelController}}"
			model="{{model}}"
			node-definitions="{{nodeDefinitions}}"
			constant-definitions="{{constantDefinitions}}">
		</qb-core-tree-manager>

		<paper-header-panel mode="seamed">

			<paper-toolbar>
				<paper-radio-group selected="{{editorMode}}">
					<paper-radio-button name="visual">
						<qb-core-i18n key="ide/editor/visual"></qb-core-i18n>
					</paper-radio-button>
					<paper-radio-button name="text">
						<qb-core-i18n key="ide/editor/text"></qb-core-i18n>
					</paper-radio-button>
				</paper-radio-group>
			</paper-toolbar>

			<qb-ui-editor
				class="fit"
				mode={{editorMode}}
				model="{{model}}"
				model-controller="{{modelController}}"
				tree-manager="{{treeManager}}"
				node-definitions="{{nodeDefinitions}}"
				constant-definitions="{{constantDefinitions}}"
				taxonomy-definitions="{{taxonomyDefinitions}}">
			</qb-ui-editor>

		</paper-header-panel>

	</template>
</dom-module>

<script>
(function () {
	window.Quirkbot = window.Quirkbot || {};
	window.Quirkbot.Ide = Polymer({
		is: 'qb-ide',
		properties: {
			programId: String,
			locale: String,
			modelController: Object,
			model: Object,
			treeManager: Object,
			nodeDefinitions: Array,
			constantDefinitions: Array,
			editorMode: String
		}
	});
})();
</script>
